
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>snakeoil.compatibility &mdash; snakeoil v-trunk documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '-trunk',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="snakeoil v-trunk documentation" href="../index.html" />
    <link rel="up" title="API Documentation" href="../api.html" />
    <link rel="next" title="snakeoil.containers" href="snakeoil.containers.html" />
    <link rel="prev" title="snakeoil.chksum" href="snakeoil.chksum.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="snakeoil.containers.html" title="snakeoil.containers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="snakeoil.chksum.html" title="snakeoil.chksum"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">snakeoil v-trunk documentation</a> &raquo;</li>
          <li><a href="../api.html" accesskey="U">API Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-snakeoil.compatibility">
<span id="snakeoil-compatibility"></span><h1>snakeoil.compatibility<a class="headerlink" href="#module-snakeoil.compatibility" title="Permalink to this headline">¶</a></h1>
<p>Compatibility functionality for python 2.4 through 3.2</p>
<p>For those of us still supporting older python versions, we&#8217;re in a bit of a
bind- we&#8217;d <em>love</em> to use the newer python functions but cannot without
abandoning support for the versions we target.</p>
<p>This module exists to ease compatibility across multiple python versions
via indirection, and fallback implementationsso that a select subset of
newer python functionality is usable in older python versions.  Additionally,
functionality that has been moved in py3k and isn&#8217;t translated by 2to3 is
accessible via this module.</p>
<p>An example would be python2.4 users wanting access to the <a class="reference internal" href="#snakeoil.compatibility.any" title="snakeoil.compatibility.any"><tt class="xref py py-func docutils literal"><span class="pre">any()</span></tt></a>
or <a class="reference internal" href="#snakeoil.compatibility.all" title="snakeoil.compatibility.all"><tt class="xref py py-func docutils literal"><span class="pre">all()</span></tt></a> functions- they&#8217;re only available in python2.5 however
the following code will work regardless if the python versions is 2.4, 2.6,
or 3.2:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">snakeoil.compatibility</span> <span class="kn">import</span> <span class="nb">any</span><span class="p">,</span> <span class="nb">all</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">all</span><span class="p">(</span><span class="bp">True</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span> <span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">all</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">any</span><span class="p">(</span><span class="mi">1</span> <span class="o">==</span> <span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The module is designed such that if there is a builtin version of
the target functionality available, it will always prefer that.  Essentially,
you&#8217;ll get the cpython version of any/all for python 2.5 and up, and the fallback
implementation for python 2.4 alone.</p>
<p>For easing py3k compatibility:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="xref py py-data docutils literal"><span class="pre">is_py3k</span></tt> is a boolean you can rely on to indicate if you&#8217;re running py2k</dt>
<dd><p class="first last">or py3k</p>
</dd>
</dl>
</li>
<li><p class="first"><tt class="xref py py-data docutils literal"><span class="pre">is_py3k_like</span></tt> is a boolean you can rely on to indicate if you&#8217;re not running
py3k, but will encounter py3k behaviour- primarily useful for instances where backports
of py3k bits into py2.6 and py2.7 have broken previous stdlib behaviour.</p>
</li>
<li><p class="first"><a class="reference internal" href="#snakeoil.compatibility.intern" title="snakeoil.compatibility.intern"><tt class="xref py py-func docutils literal"><span class="pre">intern()</span></tt></a> is accessible from here</p>
</li>
<li><p class="first"><tt class="xref py py-func docutils literal"><span class="pre">sorted_cmp()</span></tt>, <tt class="xref py py-func docutils literal"><span class="pre">sort_cmp()</span></tt>, <a class="reference internal" href="#snakeoil.compatibility.cmp" title="snakeoil.compatibility.cmp"><tt class="xref py py-func docutils literal"><span class="pre">cmp()</span></tt></a> are available for easing
compatibility across py2k/py3k for comparison and sorting args; these implementations by
default defer to the builtins whenever they&#8217;re available, only kicking in when needed.</p>
</li>
<li><p class="first"><tt class="xref py py-func docutils literal"><span class="pre">force_bytes()</span></tt> is useful for if you know you&#8217;ll need a bytes string under py3k,
but cannot force a minimal python version of 2.6 to get that syntax.  Essentially instead of
writing b&#8217;content&#8217;, you would write force_bytes(&#8220;content&#8221;).  Under py3k, you get a bytes object,
under py2k you get a plain old string w/ minimal overhead.</p>
</li>
</ul>
<p class="rubric">Functions</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr><td><a class="reference internal" href="#snakeoil.compatibility.all" title="snakeoil.compatibility.all"><tt class="xref py py-obj docutils literal"><span class="pre">all</span></tt></a></td>
<td>all(iterable) -&gt; bool</td>
</tr>
<tr><td><a class="reference internal" href="#snakeoil.compatibility.any" title="snakeoil.compatibility.any"><tt class="xref py py-obj docutils literal"><span class="pre">any</span></tt></a></td>
<td>any(iterable) -&gt; bool</td>
</tr>
<tr><td><a class="reference internal" href="#snakeoil.compatibility.cmp" title="snakeoil.compatibility.cmp"><tt class="xref py py-obj docutils literal"><span class="pre">cmp</span></tt></a></td>
<td>cmp(x, y) -&gt; integer</td>
</tr>
<tr><td><a class="reference internal" href="#snakeoil.compatibility.intern" title="snakeoil.compatibility.intern"><tt class="xref py py-obj docutils literal"><span class="pre">intern</span></tt></a></td>
<td>intern(string) -&gt; string</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">next</span></tt>(iterable)</td>
<td></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">sort_cmp</span></tt>(list_inst,&nbsp;func[,&nbsp;key,&nbsp;reverse])</td>
<td></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">sorted_cmp</span></tt>(sequence,&nbsp;func[,&nbsp;key,&nbsp;reverse])</td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Data</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">is_py3k</span></tt></td>
<td>bool(x) -&gt; bool</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">is_py3k_like</span></tt></td>
<td>bool(x) -&gt; bool</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="snakeoil.compatibility.all">
<tt class="descclassname">snakeoil.compatibility.</tt><tt class="descname">all</tt><big>(</big><big>)</big><a class="headerlink" href="#snakeoil.compatibility.all" title="Permalink to this definition">¶</a></dt>
<dd><p>all(iterable) -&gt; bool</p>
<p>Return True if bool(x) is True for all values x in the iterable.</p>
</dd></dl>

<dl class="function">
<dt id="snakeoil.compatibility.any">
<tt class="descclassname">snakeoil.compatibility.</tt><tt class="descname">any</tt><big>(</big><big>)</big><a class="headerlink" href="#snakeoil.compatibility.any" title="Permalink to this definition">¶</a></dt>
<dd><p>any(iterable) -&gt; bool</p>
<p>Return True if bool(x) is True for any x in the iterable.</p>
</dd></dl>

<dl class="function">
<dt id="snakeoil.compatibility.intern">
<tt class="descclassname">snakeoil.compatibility.</tt><tt class="descname">intern</tt><big>(</big><big>)</big><a class="headerlink" href="#snakeoil.compatibility.intern" title="Permalink to this definition">¶</a></dt>
<dd><p>intern(string) -&gt; string</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>Intern&#8217;&#8217; the given string.  This enters the string in the (global)
table of interned strings whose purpose is to speed up dictionary lookups.
Return the string itself or the previously interned string object with the
same value.</p>
</dd></dl>

<dl class="function">
<dt id="snakeoil.compatibility.cmp">
<tt class="descclassname">snakeoil.compatibility.</tt><tt class="descname">cmp</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/snakeoil/compatibility.html#cmp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snakeoil.compatibility.cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>cmp(x, y) -&gt; integer</p>
<p>Return negative if x&lt;y, zero if x==y, positive if x&gt;y.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="snakeoil.chksum.html"
                        title="previous chapter">snakeoil.chksum</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="snakeoil.containers.html"
                        title="next chapter">snakeoil.containers</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="snakeoil.containers.html" title="snakeoil.containers"
             >next</a> |</li>
        <li class="right" >
          <a href="snakeoil.chksum.html" title="snakeoil.chksum"
             >previous</a> |</li>
        <li><a href="../index.html">snakeoil v-trunk documentation</a> &raquo;</li>
          <li><a href="../api.html" >API Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Brian Harring.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>